(this["webpackJsonpblog-front-end"]=this["webpackJsonpblog-front-end"]||[]).push([[0],{41:function(e,t,n){e.exports=n(73)},46:function(e,t,n){},47:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(18),c=n.n(u),o=(n(46),n(20)),l=(n(47),n(5)),s=n.n(l),i=n(6),m=n(14),p=n.n(m),f={login:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,console.log(n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d=null,b={getAll:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createBlog:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:d}},e.next=3,p.a.post("/api/blogs",t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateBlog:function(){var e=Object(i.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat("/api/blogs","/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),postComment:function(){var e=Object(i.a)(s.a.mark((function e(t,n){var r,a,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:d}},a={comment:n},e.next=4,p.a.post("".concat("/api/blogs","/").concat(t,"/comments"),a,r);case 4:return u=e.sent,e.abrupt("return",u.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setToken:function(e){d="bearer ".concat(e)}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"SET_USER":return t.user;case"LOGOUT":return null}return e},g=n(9),E=n(75),h=n(76),w={login:function(e,t){return function(){var n=Object(i.a)(s.a.mark((function n(r){var a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f.login({username:e,password:t});case 3:a=n.sent,window.localStorage.setItem("loggedInUser",JSON.stringify(a)),b.setToken(a.token),r({type:"LOGIN",user:a}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}},y=Object(g.b)(null,w)((function(e){return a.a.createElement("div",null,a.a.createElement("h2",null,"Login"),a.a.createElement(E.a,{onSubmit:function(t){t.preventDefault();var n=t.target.username.value,r=t.target.password.value;e.login(n,r)}},a.a.createElement(E.a.Group,null,a.a.createElement(E.a.Label,null,"username"),a.a.createElement(E.a.Control,{type:"text",name:"username"}),a.a.createElement(E.a.Label,null,"password"),a.a.createElement(E.a.Control,{type:"password",name:"password"}),a.a.createElement(h.a,{variant:"primary",type:"submit"},"login"))))})),O=n(13),x=n(74),k=Object(g.b)((function(e){return{blogs:e.blogs}}))((function(e){var t=e.blogs;return a.a.createElement(x.a,{striped:!0},a.a.createElement("tbody",null,t.map((function(e){return a.a.createElement("tr",{key:e._id},a.a.createElement("td",null,a.a.createElement(O.b,{to:"/blogs/".concat(e._id)},e.title)))}))))})),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data;case"CREATE_BLOG":return e.concat(t.blog);case"COMMENT":return e.map((function(e){return e._id!==t.blog._id?e:t.blog}))}return e},S={createBlog:function(e){return function(){var t=Object(i.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.createBlog(e);case 2:r=t.sent,n({type:"CREATE_BLOG",blog:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},B=Object(g.b)((function(e){return{user:e.user}}),S)((function(e){return a.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n={title:t.target.title.value,author:t.target.author.value,url:"www.someurl.com",likes:0,user:e.user._id,comments:[]};e.createBlog(n),t.target.title.value="",t.target.author.value=""}},a.a.createElement("div",null," title:",a.a.createElement("input",{name:"title",type:"text"})),a.a.createElement("div",null," author:",a.a.createElement("input",{name:"author",type:"text"})),a.a.createElement("button",{type:"submit"},"create"))})),L=function(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),u=n[0],c=n[1],l={display:u?"none":""},s={display:u?"":"none"},i=function(){c(!u)};return a.a.createElement("div",null,a.a.createElement("div",{style:l},a.a.createElement("button",{onClick:i},e.buttonLabel)),a.a.createElement("div",{style:s},e.children,a.a.createElement("button",{onClick:i},"cancel")))},C=function(e){var t=e.users;return a.a.createElement("div",null,a.a.createElement("h2",null,"Users"),t.map((function(e){return a.a.createElement("div",{key:e.id},a.a.createElement(O.b,{to:"/users/".concat(e.id)},e.name),e.blogs.length)})))},I=function(e){var t=e.user;return void 0===t?null:a.a.createElement("div",null,a.a.createElement("h2",null,t.name),a.a.createElement("ul",null,t.blogs.map((function(e){return a.a.createElement("div",null,e.title)}))))},T={postComment:function(e,t){return function(){var n=Object(i.a)(s.a.mark((function n(r){var a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.postComment(e,t);case 2:a=n.sent,r({type:"COMMENT",blog:a});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},U=Object(g.b)(null,T)((function(e){var t=e.blog;return void 0===t?null:a.a.createElement("div",null,a.a.createElement("h2",null,t.title),a.a.createElement("div",null,"Likes ",t.likes),a.a.createElement("div",null,"Posted By ",t.author),a.a.createElement("ul",null,t.comments.map((function(e){return a.a.createElement("li",null,e)}))),a.a.createElement("form",{onSubmit:function(n){n.preventDefault(),e.postComment(t._id,n.target.comment.value),n.target.comment.value=""}},a.a.createElement("input",{type:"text",name:"comment"}),a.a.createElement("button",{type:"submit"},"add comment")))})),_=function(){var e={padding:5};return a.a.createElement("div",null,a.a.createElement(O.b,{to:"/blogs",style:e},"Blogs"),a.a.createElement(O.b,{to:"/users",style:e},"Users"))},G={getUsers:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},N=n(15),A={initializeBlogs:function(){return function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setUser:function(e){return b.setToken(e.token),{type:"SET_USER",user:e}},logout:function(){return{type:"LOGOUT"}}},z=Object(g.b)((function(e){return{user:e.user,blogs:e.blogs}}),A)((function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),u=n[0],c=n[1];Object(r.useEffect)((function(){G.getUsers().then((function(e){return c(e)}))}),[]);Object(r.useEffect)((function(){var t=window.localStorage.getItem("loggedInUser");if(t){var n=JSON.parse(t);e.setUser(n)}}),[]),Object(r.useEffect)((function(){e.initializeBlogs()}),[]);return a.a.createElement("div",{className:"container"},null===e.user&&a.a.createElement(y,null),null!==e.user&&a.a.createElement("div",null,a.a.createElement(L,{buttonLabel:"new note"},a.a.createElement(B,null)),a.a.createElement("button",{onClick:function(){window.localStorage.removeItem("loggedInUser"),e.logout()}},"logout"),a.a.createElement(O.a,null,a.a.createElement(_,null),a.a.createElement(N.a,{exact:!0,path:"/users/:id",render:function(e){var t,n=e.match;return a.a.createElement(I,{user:(t=n.params.id,u.find((function(e){return e.id===t})))})}}),a.a.createElement(N.a,{exact:!0,path:"/blogs/:id",render:function(t){var n,r=t.match;return a.a.createElement(U,{blog:(n=r.params.id,e.blogs.find((function(e){return e._id===n})))})}}),a.a.createElement(N.a,{exact:!0,path:"/blogs",render:function(){return a.a.createElement(k,null)}}),a.a.createElement(N.a,{exact:!0,path:"/users",render:function(){return a.a.createElement(C,{users:u})}}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(16),M=n(39),R=Object(J.c)({blogs:j,user:v}),D=Object(J.d)(R,Object(J.a)(M.a));c.a.render(a.a.createElement(g.a,{store:D},a.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.9f2800cb.chunk.js.map